(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory():typeof define==="function"&&define.amd?define(factory):factory()})(this,function(){"use strict";if(typeof AFRAME==="undefined"){throw new Error("Component attempted to register before AFRAME was available.")}const getUrlParameter=AFRAME.utils.getUrlParameter;AFRAME.registerComponent("post-message",{schema:{enabled:{default:true,type:"boolean"},urlParameter:{default:"state"},event:{default:"statePosted"}},multiple:false,init:function(){const el=this.el;const data=this.data;this.handlePostMessage=this.handlePostMessage.bind(this);if(data.enabled){window.addEventListener("message",this.handlePostMessage)}if(data.urlParameter){const detail=getUrlParameter(data.urlParameter);if(detail){el.emit(data.event,JSON.parse(detail))}}},handlePostMessage:function(evt){this.el.emit(this.data.event,evt.data)},update:function(oldData){},remove:function(){},pause:function(){window.removeEventListener("message",this.handlePostMessage)},play:function(){window.addEventListener("message",this.handlePostMessage)}})});
